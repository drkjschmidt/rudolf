<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>garmin-serial/RPGarmCom.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>garmin-serial/RPGarmCom.h</h1>  </div>
</div>
<div class="contents">
<a href="RPGarmCom_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;serialport.h&gt;</span>
<a name="l00004"></a>00004 
<a name="l00005"></a><a class="code" href="RPGarmCom_8h.html#a236e66662099d0fc61458d26fdeb85de">00005</a> <span class="preprocessor"># define GARM_SER_BUF 4096</span>
<a name="l00006"></a><a class="code" href="RPGarmCom_8h.html#a048d6317c800be7d996631283620fb1b">00006</a> <span class="preprocessor"></span><span class="preprocessor"># define GARM_NAM_BUF 256</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span>
<a name="l00008"></a><a class="code" href="RPGarmCom_8h.html#a52daafca8d33da32734ef34707f11fc6">00008</a> <span class="preprocessor">#define CGPS_ALT_ILLEGAL 36000000 // illegal altitude (geostationary orbit)</span>
<a name="l00009"></a><a class="code" href="RPGarmCom_8h.html#a2c9bd159f25b0e0406a4b68c6323a9d3">00009</a> <span class="preprocessor"></span><span class="preprocessor">#define CGPS_LAT_ILLEGAL 255 // illegal lat / lon (should be +-128)</span>
<a name="l00010"></a><a class="code" href="RPGarmCom_8h.html#a548980011de07828f3b7ebba86004583">00010</a> <span class="preprocessor"></span><span class="preprocessor">#define CGPS_LON_ILLEGAL 255</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span>
<a name="l00012"></a>00012 <span class="keyword">class </span><a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a>;
<a name="l00013"></a>00013 
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00018"></a><a class="code" href="classCGPSTime.html">00018</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a>
<a name="l00019"></a>00019 {
<a name="l00020"></a>00020 <span class="keyword">public</span>:
<a name="l00021"></a>00021         <a class="code" href="classCGPSTime.html#ad6550fa71c7fdc603c939a21760aaec8">CGPSTime</a>(<span class="keywordtype">void</span>);
<a name="l00022"></a>00022         <a class="code" href="classCGPSTime.html#a9ef76c34fe69327325090ef471309e7c">~CGPSTime</a>(<span class="keywordtype">void</span>);
<a name="l00023"></a>00023 
<a name="l00025"></a><a class="code" href="classCGPSTime.html#aebfe89b0e1ab1cfe8a7c375a6398518c">00025</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSTime.html#aebfe89b0e1ab1cfe8a7c375a6398518c" title="directly set int32 time stamp">setTimeInt</a>(INT32 <span class="keyword">set</span>) { <a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a>=<span class="keyword">set</span>; }
<a name="l00026"></a>00026 
<a name="l00028"></a><a class="code" href="classCGPSTime.html#a6806d2e158419bd9f7c544d18921983f">00028</a>         <span class="keyword">inline</span> INT32 <a class="code" href="classCGPSTime.html#a6806d2e158419bd9f7c544d18921983f" title="retrieve int32 time stamp">getTimeInt</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> <a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a>; }
<a name="l00029"></a>00029 
<a name="l00031"></a><a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864">00031</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864" title="retrieve hh mm ss values of timestamp">getHMS</a>(<span class="keywordtype">int</span> *hh, <span class="keywordtype">int</span> *mm, <span class="keywordtype">int</span> *ss) {
<a name="l00032"></a>00032                         *hh=(int)(<a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a>/3600);
<a name="l00033"></a>00033                         *mm=(int)((<a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a> - *hh*3600)/60);
<a name="l00034"></a>00034                         *ss=<a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a> - *hh*3600 - *mm*60;
<a name="l00035"></a>00035         }
<a name="l00036"></a>00036 
<a name="l00038"></a>00038         <span class="comment">//</span>
<a name="l00039"></a>00039         <span class="comment">// why is this so complicated ... shouldn&#39;t simple comparison of int32 values do the trick?</span>
<a name="l00040"></a><a class="code" href="classCGPSTime.html#af5b000156e8043e136f01579cb85d4f6">00040</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSTime.html#af5b000156e8043e136f01579cb85d4f6" title="compare timestamps">operator&lt;</a>(<a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a> &amp;right) {
<a name="l00041"></a>00041                 <span class="keywordtype">int</span> lh,rh,lm,rm,ls,rs;
<a name="l00042"></a>00042                 this-&gt;<a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864" title="retrieve hh mm ss values of timestamp">getHMS</a>(&amp;lh,&amp;lm,&amp;ls);
<a name="l00043"></a>00043                 right.<a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864" title="retrieve hh mm ss values of timestamp">getHMS</a>(&amp;rh,&amp;rm,&amp;rs);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045                 <span class="keywordflow">if</span> ( (lh&lt;rh) || ((lh==rh)&amp;&amp;( (lm&lt;rm) || ((lm==rm)&amp;&amp;(ls&lt;rs)) )))
<a name="l00046"></a>00046                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00047"></a>00047                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00048"></a>00048         }
<a name="l00049"></a>00049 
<a name="l00051"></a>00051         <span class="comment">//</span>
<a name="l00052"></a>00052         <span class="comment">// why is this so complicated ... shouldn&#39;t simple comparison of int32 values do the trick?</span>
<a name="l00053"></a><a class="code" href="classCGPSTime.html#a63c5ec182d3a067dfd884ba9bc3ac0cb">00053</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSTime.html#a63c5ec182d3a067dfd884ba9bc3ac0cb" title="compare timestamps">operator&gt;</a>(<a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a> &amp;right) {
<a name="l00054"></a>00054                 <span class="keywordtype">int</span> lh,rh,lm,rm,ls,rs;
<a name="l00055"></a>00055                 this-&gt;<a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864" title="retrieve hh mm ss values of timestamp">getHMS</a>(&amp;lh,&amp;lm,&amp;ls);
<a name="l00056"></a>00056                 right.<a class="code" href="classCGPSTime.html#adfd79af454e601e5a3f614e9c9bda864" title="retrieve hh mm ss values of timestamp">getHMS</a>(&amp;rh,&amp;rm,&amp;rs);
<a name="l00057"></a>00057 
<a name="l00058"></a>00058                 <span class="keywordflow">if</span> ( (lh&gt;rh) || ((lh==rh)&amp;&amp;( (lm&gt;rm) || ((lm==rm)&amp;&amp;(ls&gt;rs)) )))
<a name="l00059"></a>00059                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00060"></a>00060                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00061"></a>00061         }
<a name="l00062"></a>00062 
<a name="l00064"></a><a class="code" href="classCGPSTime.html#ab6bc91a36369e818491747cd06b8eea8">00064</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSTime.html#ab6bc91a36369e818491747cd06b8eea8" title="compare timestamps">operator==</a>(<a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a> &amp;right) {
<a name="l00065"></a>00065                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classCGPSTime.html#a6806d2e158419bd9f7c544d18921983f" title="retrieve int32 time stamp">getTimeInt</a>() == right.<a class="code" href="classCGPSTime.html#a6806d2e158419bd9f7c544d18921983f" title="retrieve int32 time stamp">getTimeInt</a>();
<a name="l00066"></a>00066         }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keyword">protected</span>:
<a name="l00069"></a><a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">00069</a>         INT32 <a class="code" href="classCGPSTime.html#af6905e087847eda9c239be33e3c6e13a">GPStime</a>;
<a name="l00070"></a>00070 };
<a name="l00071"></a>00071 
<a name="l00073"></a>00073 <span class="comment">//</span>
<a name="l00079"></a><a class="code" href="classCGPSDate.html">00079</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a>
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081 <span class="keyword">public</span>:
<a name="l00082"></a>00082         <a class="code" href="classCGPSDate.html#a39579b94285cd8157842e34bfdbc3aa8">CGPSDate</a>(<span class="keywordtype">void</span>);
<a name="l00083"></a>00083         <a class="code" href="classCGPSDate.html#a0a571fe66f5d54e2ea0add63dc00149a">~CGPSDate</a>(<span class="keywordtype">void</span>);
<a name="l00084"></a>00084 
<a name="l00086"></a><a class="code" href="classCGPSDate.html#acdb07ab1a6464d560ad170dcbc1892f9">00086</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSDate.html#acdb07ab1a6464d560ad170dcbc1892f9" title="directly set int32 date stamp">setDateInt</a>(INT32 <span class="keyword">set</span>) { <a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a>=<span class="keyword">set</span>; }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088         <span class="comment">// retrieve int32 date stamp</span>
<a name="l00089"></a><a class="code" href="classCGPSDate.html#a9f775a354ab6e73d9d1f2e1bf50bf1fc">00089</a>         <span class="keyword">inline</span> INT32 <a class="code" href="classCGPSDate.html#a9f775a354ab6e73d9d1f2e1bf50bf1fc">getDateInt</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> <a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a>; }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <span class="comment">// retrieve dd mm yy values of datestamp </span>
<a name="l00092"></a><a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">00092</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">getDMY</a>(<span class="keywordtype">int</span> *dd, <span class="keywordtype">int</span> *mm, <span class="keywordtype">int</span> *yy) {
<a name="l00093"></a>00093                         *dd=(int)(<a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a> / 10000);
<a name="l00094"></a>00094                         *mm=(int)((<a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a> - *dd*10000)/100);
<a name="l00095"></a>00095                         *yy=<a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a> - *dd*10000 - *mm*100 + 2000;
<a name="l00096"></a>00096         }
<a name="l00097"></a>00097 
<a name="l00099"></a>00099         <span class="comment">//</span>
<a name="l00100"></a>00100         <span class="comment">// as opposed to time stamps, this one does need to</span>
<a name="l00101"></a>00101         <span class="comment">// be so complicated because the most significant number</span>
<a name="l00102"></a>00102         <span class="comment">// is last ... </span>
<a name="l00103"></a><a class="code" href="classCGPSDate.html#a40f1e0765b7c761c6a305c00a80dff9f">00103</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSDate.html#a40f1e0765b7c761c6a305c00a80dff9f" title="compare datestamps">operator&lt;</a>(<a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a> &amp;right) {
<a name="l00104"></a>00104                 <span class="keywordtype">int</span> ld,rd,lm,rm,ly,ry;
<a name="l00105"></a>00105                 this-&gt;<a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">getDMY</a>(&amp;ld,&amp;lm,&amp;ly);
<a name="l00106"></a>00106                 right.<a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">getDMY</a>(&amp;rd,&amp;rm,&amp;ry);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108                 <span class="keywordflow">if</span> ( (ly&lt;ry) || ((ly==ry)&amp;&amp;( (lm&lt;rm) || ((lm==rm)&amp;&amp;(ld&lt;rd)) )))
<a name="l00109"></a>00109                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00110"></a>00110                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112 
<a name="l00114"></a>00114         <span class="comment">//</span>
<a name="l00115"></a>00115         <span class="comment">// as opposed to time stamps, this one does need to</span>
<a name="l00116"></a>00116         <span class="comment">// be so complicated because the most significant number</span>
<a name="l00117"></a>00117         <span class="comment">// is last ... </span>
<a name="l00118"></a><a class="code" href="classCGPSDate.html#a780f9cc9153dac839308a127880efd2a">00118</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSDate.html#a780f9cc9153dac839308a127880efd2a" title="compare datestamps">operator&gt;</a>(<a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a> &amp;right) {
<a name="l00119"></a>00119                 <span class="keywordtype">int</span> ld,rd,lm,rm,ly,ry;
<a name="l00120"></a>00120                 this-&gt;<a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">getDMY</a>(&amp;ld,&amp;lm,&amp;ly);
<a name="l00121"></a>00121                 right.<a class="code" href="classCGPSDate.html#ab53b636b4ae9e826d5487a0fddec6a2b">getDMY</a>(&amp;rd,&amp;rm,&amp;ry);
<a name="l00122"></a>00122 
<a name="l00123"></a>00123                 <span class="keywordflow">if</span> ( (ly&gt;ry) || ((ly==ry)&amp;&amp;( (lm&gt;rm) || ((lm==rm)&amp;&amp;(ld&gt;rd)) )))
<a name="l00124"></a>00124                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00125"></a>00125                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127 
<a name="l00129"></a><a class="code" href="classCGPSDate.html#a547a8beed6ab62f9417aa8112f9ce6d1">00129</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSDate.html#a547a8beed6ab62f9417aa8112f9ce6d1" title="compare datestamps">operator==</a>(<a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a> &amp;right) {
<a name="l00130"></a>00130                 <span class="keywordflow">return</span> this-&gt;<a class="code" href="classCGPSDate.html#a9f775a354ab6e73d9d1f2e1bf50bf1fc">getDateInt</a>() == right.<a class="code" href="classCGPSDate.html#a9f775a354ab6e73d9d1f2e1bf50bf1fc">getDateInt</a>();
<a name="l00131"></a>00131         }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 <span class="keyword">protected</span>:
<a name="l00135"></a><a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">00135</a>         INT32 <a class="code" href="classCGPSDate.html#a6fc5a07b9045cfa06fbe0e46e82d8b6c">GPSdate</a>;
<a name="l00136"></a>00136 };
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00140"></a><a class="code" href="classCGPSData.html">00140</a> <span class="keyword">class </span><a class="code" href="classCGPSData.html" title="Store and manipulate GPS data (time, date, location).">CGPSData</a> 
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142 <span class="keyword">public</span>:
<a name="l00143"></a>00143         <a class="code" href="classCGPSData.html#a869795eff4f38b2c04d061769eacd9f0">CGPSData</a>(<span class="keywordtype">void</span>);
<a name="l00144"></a>00144         <a class="code" href="classCGPSData.html#a869795eff4f38b2c04d061769eacd9f0">CGPSData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00145"></a>00145                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00146"></a>00146                 INT32 *time, INT32 *date,
<a name="l00147"></a>00147                 <span class="keywordtype">char</span> *name);
<a name="l00148"></a>00148         <a class="code" href="classCGPSData.html#a869795eff4f38b2c04d061769eacd9f0">CGPSData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00149"></a>00149                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00150"></a>00150                 INT32 *xtime, INT32 *xdate,
<a name="l00151"></a>00151                 CString *name);
<a name="l00152"></a>00152         <a class="code" href="classCGPSData.html#a869795eff4f38b2c04d061769eacd9f0">CGPSData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00153"></a>00153                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00154"></a>00154                 CTime *xtimestamp,
<a name="l00155"></a>00155                 CString *name);
<a name="l00156"></a>00156         <a class="code" href="classCGPSData.html#af3a1549219c9ff5526b68458f0c82e23">~CGPSData</a>(<span class="keywordtype">void</span>);
<a name="l00157"></a>00157 
<a name="l00159"></a>00159         <span class="comment">//</span>
<a name="l00163"></a>00163 <span class="comment"></span>        <span class="comment">//</span>
<a name="l00172"></a>00172 <span class="comment"></span>        <span class="comment">//</span>
<a name="l00173"></a>00173         <span class="keywordtype">void</span> <a class="code" href="classCGPSData.html#a7fdad98ca21ad7c6681413ff38d9352c" title="Store data in class.">setData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00174"></a>00174                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00175"></a>00175                 INT32 *xtime, INT32 *xdate,
<a name="l00176"></a>00176                 CString *name);
<a name="l00177"></a>00177 
<a name="l00179"></a>00179         <span class="comment">//</span>
<a name="l00182"></a>00182 <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classCGPSData.html#a7fdad98ca21ad7c6681413ff38d9352c" title="Store data in class.">setData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00183"></a>00183                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00184"></a>00184                 INT32 *xtime, INT32 *xdate,
<a name="l00185"></a>00185                 <span class="keywordtype">char</span> *name);
<a name="l00186"></a>00186 
<a name="l00188"></a>00188         <span class="comment">//</span>
<a name="l00191"></a>00191 <span class="comment"></span>        <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSData.html#a7fdad98ca21ad7c6681413ff38d9352c" title="Store data in class.">setData</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt, 
<a name="l00192"></a>00192                 <span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir,
<a name="l00193"></a>00193                 CTime *timestamp,
<a name="l00194"></a>00194                 CString *name);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00198"></a><a class="code" href="classCGPSData.html#a8df7f0f21a4ff0183d257b7821f8d991">00198</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span>   <a class="code" href="classCGPSData.html#a8df7f0f21a4ff0183d257b7821f8d991" title="Retrieve latitude [deg, S&amp;lt;0] ... return false if not known.">getLat</a>(<span class="keywordtype">double</span> *lat) { <span class="keywordflow">if</span> (lat != NULL) { *lat = <a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a36519c126bf507902e5d770ba8c95458">val_lat</a>; } 
<a name="l00199"></a>00199 
<a name="l00201"></a><a class="code" href="classCGPSData.html#a1ed8bb5259fc8e55472c769e8791e9ea">00201</a>         <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="classCGPSData.html#a1ed8bb5259fc8e55472c769e8791e9ea" title="Retrieve latitude [deg, S&amp;lt;0] ... return 255 if not known.">getLat</a>(<span class="keywordtype">void</span>)        { <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a36519c126bf507902e5d770ba8c95458">val_lat</a>) <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>; <span class="keywordflow">else</span> <span class="keywordflow">return</span> CGPS_LAT_ILLEGAL; }
<a name="l00202"></a>00202 
<a name="l00204"></a><a class="code" href="classCGPSData.html#a24496ef773a2014dd75ae17ae217ed7e">00204</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span>   <a class="code" href="classCGPSData.html#a24496ef773a2014dd75ae17ae217ed7e" title="Retrieve longitude [deg, W&amp;lt;0] ... return false if not known.">getLon</a>(<span class="keywordtype">double</span> *lon) { <span class="keywordflow">if</span> (lon != NULL) { *lon = <a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">val_lon</a>; } 
<a name="l00205"></a>00205 
<a name="l00207"></a><a class="code" href="classCGPSData.html#a275f85957cb3f28e8fad30675cd2d76a">00207</a>         <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="classCGPSData.html#a275f85957cb3f28e8fad30675cd2d76a" title="Retrieve longitude [deg, W&amp;lt;0] ... return 255 if not known.">getLon</a>(<span class="keywordtype">void</span>)        { <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">val_lon</a>) <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>; <span class="keywordflow">else</span> <span class="keywordflow">return</span> CGPS_LON_ILLEGAL; }
<a name="l00208"></a>00208 
<a name="l00210"></a><a class="code" href="classCGPSData.html#afb0286ddeb07d9b29ed63539bce31d11">00210</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span>   <a class="code" href="classCGPSData.html#afb0286ddeb07d9b29ed63539bce31d11" title="Retrieve altitude [m] ... return false if not known.">getAlt</a>(<span class="keywordtype">double</span> *alt) { <span class="keywordflow">if</span> (alt != NULL) { *alt = <a class="code" href="classCGPSData.html#a6fdeb6174a04d86ee1f007d1db1b9002">loc_alt</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#ac013f01207268ae1d22bb8a1fc77f424">val_alt</a>; } 
<a name="l00211"></a>00211 
<a name="l00213"></a><a class="code" href="classCGPSData.html#a25d0505b8eb0d34e31b7909f7cf4bfe9">00213</a>         <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="classCGPSData.html#a25d0505b8eb0d34e31b7909f7cf4bfe9" title="Retrieve altitude [m] ... return 36000000 if not known.">getAlt</a>(<span class="keywordtype">void</span>)        { <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#ac013f01207268ae1d22bb8a1fc77f424">val_alt</a>) <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a6fdeb6174a04d86ee1f007d1db1b9002">loc_alt</a>; <span class="keywordflow">else</span> <span class="keywordflow">return</span> CGPS_ALT_ILLEGAL; }
<a name="l00214"></a>00214 
<a name="l00217"></a><a class="code" href="classCGPSData.html#a680b3dff34b1839250eb4ea707917b02">00217</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a680b3dff34b1839250eb4ea707917b02">getLoc</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt) {
<a name="l00218"></a>00218                 <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a1ed8bb5259fc8e55472c769e8791e9ea" title="Retrieve latitude [deg, S&amp;lt;0] ... return 255 if not known.">getLat</a>(lat)&amp;<a class="code" href="classCGPSData.html#a275f85957cb3f28e8fad30675cd2d76a" title="Retrieve longitude [deg, W&amp;lt;0] ... return 255 if not known.">getLon</a>(lon)&amp;<a class="code" href="classCGPSData.html#a25d0505b8eb0d34e31b7909f7cf4bfe9" title="Retrieve altitude [m] ... return 36000000 if not known.">getAlt</a>(alt);
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00223"></a><a class="code" href="classCGPSData.html#acd8a7993ac32bae593f6a7400e6925bb">00223</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#acd8a7993ac32bae593f6a7400e6925bb" title="Retrieve speed [knots?] ... return false if not known.">getSpd</a>(<span class="keywordtype">double</span> *spd) { <span class="keywordflow">if</span> (spd != NULL) { *spd = <a class="code" href="classCGPSData.html#abbaf3f6b71e49e3aef87816449c28e48">mov_spd</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a4cb88aa6709b11e2726ff08abf657601">val_spd</a>; } 
<a name="l00224"></a>00224 
<a name="l00226"></a><a class="code" href="classCGPSData.html#ab5f59cc73a1f6212b7ce1b6e77879255">00226</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#ab5f59cc73a1f6212b7ce1b6e77879255" title="Retrieve direction [deg?] ... return false if not known.">getDir</a>(<span class="keywordtype">double</span> *dir) { <span class="keywordflow">if</span> (dir != NULL) { *dir = <a class="code" href="classCGPSData.html#a543d109aa9298d17278c9a7db58cdb4e">mov_dir</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#aba46466e3a48ba5e69c1a8bedc7daa00">val_dir</a>; } 
<a name="l00227"></a>00227 
<a name="l00230"></a><a class="code" href="classCGPSData.html#aff898f5b25991b59c883848b6c0441fd">00230</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#aff898f5b25991b59c883848b6c0441fd">getMov</a>(<span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir) {
<a name="l00231"></a>00231                 <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#acd8a7993ac32bae593f6a7400e6925bb" title="Retrieve speed [knots?] ... return false if not known.">getSpd</a>(spd)&amp;<a class="code" href="classCGPSData.html#ab5f59cc73a1f6212b7ce1b6e77879255" title="Retrieve direction [deg?] ... return false if not known.">getDir</a>(dir);
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 
<a name="l00236"></a><a class="code" href="classCGPSData.html#a711acc6ad968a80cfc568955c1f3c064">00236</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a711acc6ad968a80cfc568955c1f3c064" title="Retrieve time [int32 = hhmmss] ... return false if not known.">getTime</a>(INT32 *time) { <span class="keywordflow">if</span> (time != NULL) { *time = <a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a>; } 
<a name="l00237"></a>00237 
<a name="l00239"></a><a class="code" href="classCGPSData.html#a0d2ebcc1079953780d10f7cbff48b1fc">00239</a>         <span class="keyword">inline</span> INT32 <a class="code" href="classCGPSData.html#a0d2ebcc1079953780d10f7cbff48b1fc" title="Retrieve time [int32 = hhmmss] ... return -1 if not known.">getTime</a>(<span class="keywordtype">void</span>)       { <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a>) <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>; <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1; }
<a name="l00240"></a>00240 
<a name="l00242"></a>00242         <span class="comment">// @@@ // need validity check?</span>
<a name="l00243"></a><a class="code" href="classCGPSData.html#a2441f1d3ec9dc0fe91a1cafdcbc68cdf">00243</a>         <span class="keyword">inline</span> <a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a> <a class="code" href="classCGPSData.html#a2441f1d3ec9dc0fe91a1cafdcbc68cdf" title="Retrieve time [CGPStime] ... there is no validity check?!?">getGPSTime</a>(<span class="keywordtype">void</span>) { <a class="code" href="classCGPSTime.html" title="Manipulate time stamps as used by NMEA / GPS.">CGPSTime</a> t; t.<a class="code" href="classCGPSTime.html#aebfe89b0e1ab1cfe8a7c375a6398518c" title="directly set int32 time stamp">setTimeInt</a>(<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>); <span class="keywordflow">return</span> t; }
<a name="l00244"></a>00244 
<a name="l00246"></a><a class="code" href="classCGPSData.html#ad3c9264233a0e6ab8fe5b155ccacf0a5">00246</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#ad3c9264233a0e6ab8fe5b155ccacf0a5" title="Retrieve date [int32 = ddmmyy] ... return false if not known.">getDate</a>(INT32 *date) { <span class="keywordflow">if</span> (date != NULL) { *date = <a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a>; } 
<a name="l00247"></a>00247 
<a name="l00249"></a><a class="code" href="classCGPSData.html#a9583ab5dc6d62fe9b834f9f60a941c46">00249</a>         <span class="keyword">inline</span> INT32 <a class="code" href="classCGPSData.html#a9583ab5dc6d62fe9b834f9f60a941c46" title="Retrieve date [int32 = ddmmyy] ... return -1 if not known.">getDate</a>(<span class="keywordtype">void</span>)       { <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a>) <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a>; <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1; }
<a name="l00250"></a>00250 
<a name="l00252"></a>00252         <span class="comment">// @@@ // need validity check?</span>
<a name="l00253"></a><a class="code" href="classCGPSData.html#a584126066851ff423552623dbac18aa4">00253</a>         <span class="keyword">inline</span> <a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a> <a class="code" href="classCGPSData.html#a584126066851ff423552623dbac18aa4" title="Retrieve date [CGPSdate] ... there is no validity check?!?">getGPSDate</a>(<span class="keywordtype">void</span>) { <a class="code" href="classCGPSDate.html" title="Manipulate date stamps as used by NMEA / GPS.">CGPSDate</a> t; t.<a class="code" href="classCGPSDate.html#acdb07ab1a6464d560ad170dcbc1892f9" title="directly set int32 date stamp">setDateInt</a>(<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a>); <span class="keywordflow">return</span> t; }
<a name="l00254"></a>00254 
<a name="l00257"></a><a class="code" href="classCGPSData.html#a88077fca813b5bf9da6db8e3c28119d4">00257</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a88077fca813b5bf9da6db8e3c28119d4">getTimeDate</a>(INT32 *time, INT32 *date) {
<a name="l00258"></a>00258                 <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#a0d2ebcc1079953780d10f7cbff48b1fc" title="Retrieve time [int32 = hhmmss] ... return -1 if not known.">getTime</a>(time)&amp;<a class="code" href="classCGPSData.html#a9583ab5dc6d62fe9b834f9f60a941c46" title="Retrieve date [int32 = ddmmyy] ... return -1 if not known.">getDate</a>(date);
<a name="l00259"></a>00259         }
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="classCGPSData.html#a0b2a7356ee6838b3e499c09f01afe128">00262</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a0b2a7356ee6838b3e499c09f01afe128" title="Retrieve time and data encapsulated in a convenient CTime structure ...">getTimeDate</a>(CTime *timestamp) {
<a name="l00263"></a>00263                 <span class="comment">// this is ugly and should not be an inline!</span>
<a name="l00264"></a>00264                 <span class="comment">// http://www.cplusplus.com/reference/clibrary/ctime/mktime/</span>
<a name="l00265"></a>00265                 <span class="keywordflow">if</span> ((<a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a>) &amp;&amp; (<a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a>)) {
<a name="l00266"></a>00266                         INT32 hh,mm,ss;
<a name="l00267"></a>00267                         INT32 YY,MM,DD;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269                         hh=(int)(<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>/3600);
<a name="l00270"></a>00270                         mm=(int)((<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a> - hh*3600)/60);
<a name="l00271"></a>00271                         ss=<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a> - hh*3600 - mm*60;
<a name="l00272"></a>00272                         DD=(int)(<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> / 10000);
<a name="l00273"></a>00273                         MM=(int)((<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> - DD*10000)/100);
<a name="l00274"></a>00274                         YY=<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> - DD*10000 - MM*100 + 2000;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276                         CTime t;
<a name="l00277"></a>00277                         tm tstruct;
<a name="l00278"></a>00278                         tstruct.tm_year=YY-1900;
<a name="l00279"></a>00279                         tstruct.tm_mon=MM-1;
<a name="l00280"></a>00280                         tstruct.tm_mday=DD;
<a name="l00281"></a>00281                         tstruct.tm_hour=hh;
<a name="l00282"></a>00282                         tstruct.tm_min=mm;
<a name="l00283"></a>00283                         tstruct.tm_sec=ss;
<a name="l00284"></a>00284                         *timestamp=CTime(mktime(&amp;tstruct));
<a name="l00285"></a>00285 
<a name="l00286"></a>00286                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00287"></a>00287                 }
<a name="l00288"></a>00288                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="classCGPSData.html#adbbe1bbc3921aeedcfb8cb25d8839562">00292</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#adbbe1bbc3921aeedcfb8cb25d8839562" title="Retrieve gps name ... return false if not known.">getName</a>(CString *name) { <span class="keywordflow">if</span> (name != NULL) { *name = <a class="code" href="classCGPSData.html#af1f3f6f7e4751c48e32a5e62d2d24224">gps_name</a>; } <span class="keywordflow">return</span> <a class="code" href="classCGPSData.html#ac5c339f86542189ba70f5284f256b6e1">val_name</a>; } 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 
<a name="l00296"></a><a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5">00296</a>         <span class="keyword">enum</span> <a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5" title="Output format flags for seriazlize function.">SerializeModes</a> {
<a name="l00297"></a><a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5adffe984c3311ab5327b5dbf8cceb2944">00297</a>                 <a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5adffe984c3311ab5327b5dbf8cceb2944">outputCSV</a> =   (<span class="keywordtype">unsigned</span> char) 0x01,
<a name="l00298"></a><a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5a5d9fcdcdbf6756012ff5c553e693b718">00298</a>                 <a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5a5d9fcdcdbf6756012ff5c553e693b718">outputXML</a> =   (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) 0x02,
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5aaebaf5d98136feb3281b6cc80c2ccdbe">00300</a>                 <a class="code" href="classCGPSData.html#a3ed27f817d8b14809afa88f75761c8f5aaebaf5d98136feb3281b6cc80c2ccdbe">outputHDR</a> =   (<span class="keywordtype">unsigned</span> char) 0x80, <span class="comment">// only valid in combination with outputCSV</span>
<a name="l00301"></a>00301         };
<a name="l00302"></a>00302 
<a name="l00304"></a>00304         CString <a class="code" href="classCGPSData.html#a979ff9cfa092eb3aec37c54bd2470bb7" title="Output GPS data in CSV or XML format (don&amp;#39;t think XML is implemented).">serialize</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mode);
<a name="l00305"></a>00305 
<a name="l00309"></a>00309         <span class="comment">//</span>
<a name="l00310"></a><a class="code" href="classCGPSData.html#acc4a072edd7468a6b63c9413b706d1c9">00310</a>         <span class="keyword">inline</span> CString <a class="code" href="classCGPSData.html#acc4a072edd7468a6b63c9413b706d1c9">formatLoc</a>() {
<a name="l00311"></a>00311                 CString tval;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313                 tval.Empty();
<a name="l00314"></a>00314                 <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a36519c126bf507902e5d770ba8c95458">val_lat</a>) {
<a name="l00315"></a>00315                         tval.AppendFormat(_T(<span class="stringliteral">&quot;%.6f%s &quot;</span>),
<a name="l00316"></a>00316                         (<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>&gt;0)?(<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>):(-<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>), (<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>&gt;0)?(_T(<span class="stringliteral">&quot;N&quot;</span>)):(_T(<span class="stringliteral">&quot;S&quot;</span>)));
<a name="l00317"></a>00317                 } <span class="keywordflow">else</span> {
<a name="l00318"></a>00318                         tval.Append(_T(<span class="stringliteral">&quot;??N &quot;</span>));
<a name="l00319"></a>00319                 }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321                 <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">val_lon</a>) {
<a name="l00322"></a>00322                         tval.AppendFormat(_T(<span class="stringliteral">&quot;%.6f%s &quot;</span>),
<a name="l00323"></a>00323                         (<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>&gt;0)?(<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>):(-<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>), (<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>&gt;0)?(_T(<span class="stringliteral">&quot;E&quot;</span>)):(_T(<span class="stringliteral">&quot;W&quot;</span>)));
<a name="l00324"></a>00324                 } <span class="keywordflow">else</span> {
<a name="l00325"></a>00325                         tval.Append(_T(<span class="stringliteral">&quot;??W &quot;</span>));
<a name="l00326"></a>00326                 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328                 <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#ac013f01207268ae1d22bb8a1fc77f424">val_alt</a>) {
<a name="l00329"></a>00329                         tval.AppendFormat(_T(<span class="stringliteral">&quot;%.1fm &quot;</span>), <a class="code" href="classCGPSData.html#a6fdeb6174a04d86ee1f007d1db1b9002">loc_alt</a>);
<a name="l00330"></a>00330                 } <span class="keywordflow">else</span> {
<a name="l00331"></a>00331                         tval.Append(_T(<span class="stringliteral">&quot;??m &quot;</span>));
<a name="l00332"></a>00332                 }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                 <span class="keywordflow">return</span> tval;
<a name="l00335"></a>00335         }
<a name="l00336"></a>00336 
<a name="l00340"></a>00340         <span class="comment">//</span>
<a name="l00341"></a><a class="code" href="classCGPSData.html#af3bfb72e6274e4c0f5cf7a8663cac1a4">00341</a>         <span class="keyword">inline</span> CString <a class="code" href="classCGPSData.html#af3bfb72e6274e4c0f5cf7a8663cac1a4">formatTime</a>() {
<a name="l00342"></a>00342                 CString tval;
<a name="l00343"></a>00343                 INT32 hh,mm,ss;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345                 <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a>) {
<a name="l00346"></a>00346                         <span class="comment">// @@@ - gps_time is in HHMMSS ... why did I write this as utc type conversion?</span>
<a name="l00347"></a>00347                         <span class="comment">//hh=(int)(gps_time/3600);</span>
<a name="l00348"></a>00348                         <span class="comment">//mm=(int)((gps_time - hh*3600)/60);</span>
<a name="l00349"></a>00349                         <span class="comment">//ss=gps_time - hh*3600 - mm*60;</span>
<a name="l00350"></a>00350                         hh=(int)(<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>/10000);
<a name="l00351"></a>00351                         mm=(int)((<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a> - hh*10000)/100);
<a name="l00352"></a>00352                         ss=<a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a> - hh*10000 - mm*100;
<a name="l00353"></a>00353 
<a name="l00354"></a>00354                         tval.Format(_T(<span class="stringliteral">&quot;%02d:%02d:%02d UTC &quot;</span>),hh,mm,ss);
<a name="l00355"></a>00355                 } <span class="keywordflow">else</span> {
<a name="l00356"></a>00356                         tval=_T(<span class="stringliteral">&quot;Unknown time &quot;</span>);
<a name="l00357"></a>00357                         <span class="comment">// tval=_T(&quot;??:??:?? UTC &quot;);</span>
<a name="l00358"></a>00358                 }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360                 <span class="keywordflow">return</span> tval;
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362 
<a name="l00366"></a>00366         <span class="comment">//</span>
<a name="l00367"></a><a class="code" href="classCGPSData.html#ada2f10d46084a5351f6beb2e8f7b8a0d">00367</a>         <span class="keyword">inline</span> CString <a class="code" href="classCGPSData.html#ada2f10d46084a5351f6beb2e8f7b8a0d">formatDate</a>() {
<a name="l00368"></a>00368                 CString tval;
<a name="l00369"></a>00369                 INT32 dd,mm,yy;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371                 <span class="keywordflow">if</span> (<a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a>) {
<a name="l00372"></a>00372                         dd=(int)(<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> / 10000);
<a name="l00373"></a>00373                         mm=(int)((<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> - dd*10000)/100);
<a name="l00374"></a>00374                         yy=<a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a> - dd*10000 - mm*100 + 2000;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376                         tval.Format(_T(<span class="stringliteral">&quot;%04d-%02d-%02d &quot;</span>),yy,mm,dd);
<a name="l00377"></a>00377                 } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378                         tval=_T(<span class="stringliteral">&quot;Unknown date &quot;</span>);
<a name="l00379"></a>00379                         <span class="comment">// tval=_T(&quot;????-??-?? &quot;);</span>
<a name="l00380"></a>00380                 }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382                 <span class="keywordflow">return</span> tval;
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384 
<a name="l00386"></a><a class="code" href="classCGPSData.html#a36fa1f44defa2ebfce6345a8bc500f1a">00386</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCGPSData.html#a36fa1f44defa2ebfce6345a8bc500f1a" title="Invalidate some or all stored settings. By default all settings are invaldated.">invalidateData</a>(
<a name="l00387"></a>00387                 <span class="keywordtype">bool</span> inv_lat =<span class="keyword">true</span>,
<a name="l00388"></a>00388                 <span class="keywordtype">bool</span> inv_lon =<span class="keyword">true</span>,
<a name="l00389"></a>00389                 <span class="keywordtype">bool</span> inv_alt =<span class="keyword">true</span>,
<a name="l00390"></a>00390                 <span class="keywordtype">bool</span> inv_spd =<span class="keyword">true</span>,
<a name="l00391"></a>00391                 <span class="keywordtype">bool</span> inv_dir =<span class="keyword">true</span>,
<a name="l00392"></a>00392                 <span class="keywordtype">bool</span> inv_time=<span class="keyword">true</span>,
<a name="l00393"></a>00393                 <span class="keywordtype">bool</span> inv_date=<span class="keyword">true</span>,
<a name="l00394"></a>00394                 <span class="keywordtype">bool</span> inv_name=<span class="keyword">true</span>
<a name="l00395"></a>00395         ) {
<a name="l00396"></a>00396                 <span class="keywordflow">if</span> (inv_lat ) <a class="code" href="classCGPSData.html#a36519c126bf507902e5d770ba8c95458">val_lat</a>  = <span class="keyword">false</span>;
<a name="l00397"></a>00397                 <span class="keywordflow">if</span> (inv_lon ) <a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">val_lon</a>  = <span class="keyword">false</span>;
<a name="l00398"></a>00398                 <span class="keywordflow">if</span> (inv_alt ) <a class="code" href="classCGPSData.html#ac013f01207268ae1d22bb8a1fc77f424">val_alt</a>  = <span class="keyword">false</span>;
<a name="l00399"></a>00399                 <span class="keywordflow">if</span> (inv_spd ) <a class="code" href="classCGPSData.html#a4cb88aa6709b11e2726ff08abf657601">val_spd</a>  = <span class="keyword">false</span>;
<a name="l00400"></a>00400                 <span class="keywordflow">if</span> (inv_dir ) <a class="code" href="classCGPSData.html#aba46466e3a48ba5e69c1a8bedc7daa00">val_dir</a>  = <span class="keyword">false</span>;
<a name="l00401"></a>00401                 <span class="keywordflow">if</span> (inv_time) <a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a> = <span class="keyword">false</span>;
<a name="l00402"></a>00402                 <span class="keywordflow">if</span> (inv_date) <a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a> = <span class="keyword">false</span>;
<a name="l00403"></a>00403                 <span class="keywordflow">if</span> (inv_name) <a class="code" href="classCGPSData.html#ac5c339f86542189ba70f5284f256b6e1">val_name</a> = <span class="keyword">false</span>;
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 <span class="keyword">protected</span>:
<a name="l00407"></a>00407         <span class="comment">// lat / lon are in degrees ... note that this is different from the Spanner</span>
<a name="l00408"></a>00408         <span class="comment">// response which is in some sort of DDDDMM.SSSSS format.</span>
<a name="l00409"></a><a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">00409</a>         <span class="keywordtype">double</span> <a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>, <a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>, <a class="code" href="classCGPSData.html#a6fdeb6174a04d86ee1f007d1db1b9002">loc_alt</a>;
<a name="l00410"></a><a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">00410</a>         <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a36519c126bf507902e5d770ba8c95458">val_lat</a>, <a class="code" href="classCGPSData.html#a49a67e538fa5945e0bfc736a443174bf">val_lon</a>, <a class="code" href="classCGPSData.html#ac013f01207268ae1d22bb8a1fc77f424">val_alt</a>;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412         <span class="comment">// movement speed and direction as reported by GPS</span>
<a name="l00413"></a><a class="code" href="classCGPSData.html#abbaf3f6b71e49e3aef87816449c28e48">00413</a>         <span class="keywordtype">double</span> <a class="code" href="classCGPSData.html#abbaf3f6b71e49e3aef87816449c28e48">mov_spd</a>, <a class="code" href="classCGPSData.html#a543d109aa9298d17278c9a7db58cdb4e">mov_dir</a>;
<a name="l00414"></a><a class="code" href="classCGPSData.html#a4cb88aa6709b11e2726ff08abf657601">00414</a>         <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a4cb88aa6709b11e2726ff08abf657601">val_spd</a>, <a class="code" href="classCGPSData.html#aba46466e3a48ba5e69c1a8bedc7daa00">val_dir</a>;
<a name="l00415"></a>00415 
<a name="l00416"></a>00416         <span class="comment">// UTC Time in seconds since midnight </span>
<a name="l00417"></a><a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">00417</a>         INT32 <a class="code" href="classCGPSData.html#afb7905ff297607cc06e4846720ef6143">gps_time</a>;
<a name="l00418"></a><a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">00418</a>         <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a5ef2d271e3356ee58b5dfdf9a0924a0a">val_time</a>;
<a name="l00419"></a>00419         <span class="comment">// UTC Date in ... DDMMYY?</span>
<a name="l00420"></a><a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">00420</a>         INT32 <a class="code" href="classCGPSData.html#a20f13f73b2834db116560dc3067184b5">gps_date</a>;
<a name="l00421"></a><a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">00421</a>         <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#a00222a654d92f5ce8338b768ba6f42aa">val_date</a>;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423         <span class="comment">// GPS name / info</span>
<a name="l00424"></a><a class="code" href="classCGPSData.html#af1f3f6f7e4751c48e32a5e62d2d24224">00424</a>         CString <a class="code" href="classCGPSData.html#af1f3f6f7e4751c48e32a5e62d2d24224">gps_name</a>;
<a name="l00425"></a><a class="code" href="classCGPSData.html#ac5c339f86542189ba70f5284f256b6e1">00425</a>         <span class="keywordtype">bool</span> <a class="code" href="classCGPSData.html#ac5c339f86542189ba70f5284f256b6e1">val_name</a>;
<a name="l00426"></a>00426 };
<a name="l00427"></a>00427 
<a name="l00430"></a><a class="code" href="classCRPGarmCom.html">00430</a> <span class="keyword">class </span><a class="code" href="classCRPGarmCom.html">CRPGarmCom</a>
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432 <span class="keyword">public</span>:
<a name="l00433"></a>00433         <a class="code" href="classCRPGarmCom.html">CRPGarmCom</a>(<span class="keywordtype">void</span>);
<a name="l00434"></a>00434         ~<a class="code" href="classCRPGarmCom.html">CRPGarmCom</a>(<span class="keywordtype">void</span>);
<a name="l00435"></a>00435 
<a name="l00436"></a>00436 <span class="keyword">public</span>:
<a name="l00438"></a>00438         <span class="keywordtype">bool</span> getGarminPorts(CStringArray &amp;ports);
<a name="l00439"></a>00439 
<a name="l00441"></a>00441         <span class="keywordtype">bool</span> getComPorts(CUIntArray &amp;portnos);
<a name="l00442"></a>00442 
<a name="l00444"></a>00444         CString getComPort(<span class="keywordtype">void</span>);
<a name="l00445"></a>00445 
<a name="l00447"></a><a class="code" href="classCRPGarmCom.html#a469e30de2b823fa581f883e7da68b444">00447</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a469e30de2b823fa581f883e7da68b444" title="set the port on which to operate (currently only COM ports are supported)">setGarminPort</a>(CString &amp;port) { <span class="keywordflow">return</span> setComPort(port); }
<a name="l00448"></a>00448 
<a name="l00450"></a>00450         <span class="keywordtype">bool</span> setComPort(CString &amp;port);
<a name="l00451"></a>00451 
<a name="l00453"></a><a class="code" href="classCRPGarmCom.html#a33880a28543f9a14fc04111829688768">00453</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a33880a28543f9a14fc04111829688768" title="open previously selected port for reading (currently only COM ports are supported)">openGarminPort</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> openComPort(); }
<a name="l00455"></a>00455         <span class="keywordtype">bool</span> openComPort(<span class="keywordtype">void</span>);
<a name="l00456"></a>00456 
<a name="l00458"></a><a class="code" href="classCRPGarmCom.html#ae246ed4a7806d140aeef2bc3477b6cd1">00458</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classCRPGarmCom.html#ae246ed4a7806d140aeef2bc3477b6cd1" title="close the port (currently only COM ports are supported)">closeGarminPort</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> closeComPort(); }
<a name="l00459"></a>00459 
<a name="l00461"></a>00461         <span class="keywordtype">void</span> closeComPort(<span class="keywordtype">void</span>);
<a name="l00462"></a>00462 
<a name="l00464"></a>00464         <span class="keywordtype">int</span> readComPort(<span class="keywordtype">void</span>);
<a name="l00465"></a>00465 
<a name="l00467"></a>00467         <span class="comment">//</span>
<a name="l00471"></a><a class="code" href="classCRPGarmCom.html#a4717f6f353ade216d6dd51acbfeb7c87">00471</a> <span class="comment"></span>        <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a4717f6f353ade216d6dd51acbfeb7c87" title="check whether we seem to have a valid GPS">isValid</a>() { <span class="keywordflow">return</span> is_valid; }
<a name="l00472"></a>00472 
<a name="l00474"></a><a class="code" href="classCRPGarmCom.html#a240c353e44f4a04b8eac224aebc69a08">00474</a>         <span class="keyword">inline</span> <span class="keywordtype">void</span> invalidateInfo(
<a name="l00475"></a>00475                 <span class="keywordtype">bool</span> inv_lat =<span class="keyword">true</span>,
<a name="l00476"></a>00476                 <span class="keywordtype">bool</span> inv_lon =<span class="keyword">true</span>,
<a name="l00477"></a>00477                 <span class="keywordtype">bool</span> inv_alt =<span class="keyword">true</span>,
<a name="l00478"></a>00478                 <span class="keywordtype">bool</span> inv_spd =<span class="keyword">true</span>,
<a name="l00479"></a>00479                 <span class="keywordtype">bool</span> inv_dir =<span class="keyword">true</span>,
<a name="l00480"></a>00480                 <span class="keywordtype">bool</span> inv_time=<span class="keyword">true</span>,
<a name="l00481"></a>00481                 <span class="keywordtype">bool</span> inv_date=<span class="keyword">true</span>,
<a name="l00482"></a>00482                 <span class="keywordtype">bool</span> inv_name=<span class="keyword">true</span>
<a name="l00483"></a>00483         ) {
<a name="l00484"></a>00484                 curData.invalidateData(inv_lat,inv_lon,inv_alt,inv_spd,inv_dir,inv_time,inv_date,inv_name);
<a name="l00485"></a>00485         }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 
<a name="l00489"></a>00489         <span class="comment">//</span>
<a name="l00492"></a>00492 <span class="comment"></span>        <span class="keywordtype">bool</span> updateInfo(<span class="keywordtype">bool</span> invalidate=<span class="keyword">false</span>);
<a name="l00493"></a>00493 
<a name="l00494"></a><a class="code" href="classCRPGarmCom.html#a1cc429ea88124e2eceb110d26f74f94c">00494</a>         <span class="keyword">inline</span> <span class="keywordtype">char</span>* <a class="code" href="classCRPGarmCom.html#a1cc429ea88124e2eceb110d26f74f94c">getIObuf</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> iobuf; }
<a name="l00495"></a>00495 
<a name="l00496"></a><a class="code" href="classCRPGarmCom.html#ad16fbe473e60979eb7c73db9912153ff">00496</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#ad16fbe473e60979eb7c73db9912153ff">getLoc</a>(<span class="keywordtype">double</span> *lat, <span class="keywordtype">double</span> *lon, <span class="keywordtype">double</span> *alt) {
<a name="l00497"></a>00497                 <span class="keywordflow">return</span> curData.getLoc(lat,lon,alt);
<a name="l00498"></a>00498         }
<a name="l00499"></a><a class="code" href="classCRPGarmCom.html#a6a7cb254b7d20328ad72106a6b736dda">00499</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a6a7cb254b7d20328ad72106a6b736dda">getMov</a>(<span class="keywordtype">double</span> *spd, <span class="keywordtype">double</span> *dir) {
<a name="l00500"></a>00500                 <span class="keywordflow">return</span> curData.getMov(spd,dir);
<a name="l00501"></a>00501         }
<a name="l00502"></a><a class="code" href="classCRPGarmCom.html#a9b03b1649a9710e50593ac16020212ae">00502</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a9b03b1649a9710e50593ac16020212ae">getTimeData</a>(INT32 *time, INT32 *date) {
<a name="l00503"></a>00503                 <span class="keywordflow">return</span> curData.getTimeDate(time,date);
<a name="l00504"></a>00504         }
<a name="l00505"></a><a class="code" href="classCRPGarmCom.html#a7a0c002ccffafe6dbe5ab600b7555279">00505</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCRPGarmCom.html#a7a0c002ccffafe6dbe5ab600b7555279">getName</a>(CString *xname) { 
<a name="l00506"></a>00506                 <span class="keywordflow">return</span> curData.getName(xname);
<a name="l00507"></a>00507         }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509         <span class="comment">// we need a way to tell whether this data is still valid ...</span>
<a name="l00510"></a><a class="code" href="classCRPGarmCom.html#ac23675cb58d274ca7ff1f20027feb314">00510</a>         CTime lastGPRMC,lastGPGGA,lastPGRMT;
<a name="l00511"></a>00511 
<a name="l00512"></a><a class="code" href="classCRPGarmCom.html#ae751232dc2959d6bab5f9e5348360706">00512</a>         <span class="keyword">inline</span> CString <a class="code" href="classCRPGarmCom.html#ae751232dc2959d6bab5f9e5348360706">cser</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mode) { <span class="keywordflow">return</span> curData.serialize(mode); };
<a name="l00513"></a><a class="code" href="classCRPGarmCom.html#aa3efe9b25d2264d9198e41b3884b7f65">00513</a>         <span class="keyword">inline</span> CString <a class="code" href="classCRPGarmCom.html#aa3efe9b25d2264d9198e41b3884b7f65">formatLoc</a>()  { <span class="keywordflow">return</span> curData.formatLoc(); }
<a name="l00514"></a><a class="code" href="classCRPGarmCom.html#ac72f1117caee1fb4c493976b364599d9">00514</a>         <span class="keyword">inline</span> CString <a class="code" href="classCRPGarmCom.html#ac72f1117caee1fb4c493976b364599d9">formatTime</a>() { <span class="keywordflow">return</span> curData.formatTime(); }
<a name="l00515"></a><a class="code" href="classCRPGarmCom.html#ae83c84b67bb967c03b5080862fea8fa1">00515</a>         <span class="keyword">inline</span> CString <a class="code" href="classCRPGarmCom.html#ae83c84b67bb967c03b5080862fea8fa1">formatDate</a>() { <span class="keywordflow">return</span> curData.formatDate(); }
<a name="l00516"></a>00516 
<a name="l00517"></a><a class="code" href="classCRPGarmCom.html#a233cf8478f890623393df0b172a5e743">00517</a>         <span class="keyword">inline</span> <a class="code" href="classCGPSData.html" title="Store and manipulate GPS data (time, date, location).">CGPSData</a> <a class="code" href="classCRPGarmCom.html#a233cf8478f890623393df0b172a5e743">getGPSInfo</a>() { <span class="keywordflow">return</span> curData; }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 <span class="keyword">protected</span>:
<a name="l00520"></a><a class="code" href="classCRPGarmCom.html#a116e8d3aeef702bac9ee730fd7732dda">00520</a>         CString comPort;
<a name="l00521"></a><a class="code" href="classCRPGarmCom.html#ad34e4fe761769eff8304542339c8a764">00521</a>         CSerialPort comPortCtrl;
<a name="l00522"></a>00522 
<a name="l00523"></a><a class="code" href="classCRPGarmCom.html#a164f7f5d1a9bbb3346b2b52f33f10c7a">00523</a>         <a class="code" href="classCGPSData.html" title="Store and manipulate GPS data (time, date, location).">CGPSData</a> curData;
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 <span class="comment">/*</span>
<a name="l00526"></a>00526 <span class="comment">        // lat / lon are in degrees ... note that this is different from the Spanner</span>
<a name="l00527"></a>00527 <span class="comment">        // response which is in some sort of DDDDMM.SSSSS format.</span>
<a name="l00528"></a>00528 <span class="comment">        double loc_lat, loc_lon, loc_alt;</span>
<a name="l00529"></a>00529 <span class="comment"></span>
<a name="l00530"></a>00530 <span class="comment">        // movement speed and direction as reported by GPS</span>
<a name="l00531"></a>00531 <span class="comment">        double mov_spd, mov_dir;</span>
<a name="l00532"></a>00532 <span class="comment"></span>
<a name="l00533"></a>00533 <span class="comment">        // UTC Time in seconds since midnight </span>
<a name="l00534"></a>00534 <span class="comment">        INT32 time;</span>
<a name="l00535"></a>00535 <span class="comment">        // UTC Date in ... DDMMYY?</span>
<a name="l00536"></a>00536 <span class="comment">        INT32 date;</span>
<a name="l00537"></a>00537 <span class="comment"></span>
<a name="l00538"></a>00538 <span class="comment">        // GPS name / info</span>
<a name="l00539"></a>00539 <span class="comment">        char name[GARM_NAM_BUF];</span>
<a name="l00540"></a>00540 <span class="comment">*/</span>
<a name="l00541"></a>00541 
<a name="l00542"></a>00542         <span class="keywordtype">bool</span> check_csum(<span class="keyword">const</span> <span class="keywordtype">char</span> *temptoks, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *return_cs=NULL);
<a name="l00544"></a>00544         <span class="comment">//</span>
<a name="l00547"></a>00547 <span class="comment"></span>        <span class="keywordtype">char</span> *strstok(<span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *delim);
<a name="l00548"></a>00548         <span class="keywordtype">char</span> *strstok_r(<span class="keywordtype">char</span> *s, <span class="keyword">const</span> <span class="keywordtype">char</span> *delim, <span class="keywordtype">char</span> **lasts);
<a name="l00549"></a>00549 
<a name="l00550"></a>00550         <span class="keywordtype">bool</span> parseGPRMC(<span class="keyword">const</span> <span class="keywordtype">char</span> *temptoks,
<a name="l00551"></a>00551                 INT32 *time,INT32 *date,
<a name="l00552"></a>00552                 <span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>,<span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>, 
<a name="l00553"></a>00553                 <span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#abbaf3f6b71e49e3aef87816449c28e48">mov_spd</a>,<span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#a543d109aa9298d17278c9a7db58cdb4e">mov_dir</a>);
<a name="l00554"></a>00554         <span class="keywordtype">bool</span> parseGPGGA(<span class="keyword">const</span> <span class="keywordtype">char</span> *temptoks,
<a name="l00555"></a>00555                 INT32 *time,
<a name="l00556"></a>00556                 <span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#a06d07f0846f193d39382a68af36a285e">loc_lat</a>,<span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#acf00f72540ec6345d2422f33a5fd0b1f">loc_lon</a>,<span class="keywordtype">double</span> *<a class="code" href="classCGPSData.html#a6fdeb6174a04d86ee1f007d1db1b9002">loc_alt</a>);
<a name="l00557"></a>00557         <span class="keywordtype">bool</span> parsePGRMT(<span class="keyword">const</span> <span class="keywordtype">char</span> *temptoks,<span class="keywordtype">char</span> *name);
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 <span class="keyword">private</span>:
<a name="l00560"></a><a class="code" href="classCRPGarmCom.html#af309c1b2cacb0d9c11156890c7e9777d">00560</a>         <span class="keywordtype">char</span> iobuf[GARM_SER_BUF];
<a name="l00561"></a>00561         <span class="keywordtype">double</span> garloc_to_realloc(CString* garloc);
<a name="l00562"></a><a class="code" href="classCRPGarmCom.html#a11b1a8233c49119c46f24b1de4c62685">00562</a>         <span class="keywordtype">bool</span> is_open; <span class="comment">// keep track of open / close operations</span>
<a name="l00563"></a><a class="code" href="classCRPGarmCom.html#a3bd878214f7f921f003d743aa321cfd2">00563</a>         <span class="keywordtype">bool</span> is_valid; <span class="comment">// *guess* at validity of port ... </span>
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 
<a name="l00566"></a>00566         
<a name="l00567"></a>00567 };
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 6 2011 17:24:58 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
